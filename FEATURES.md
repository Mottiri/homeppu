# ほめっぷ 機能一覧 (Features)

## 概要
このドキュメントは、ほめっぷアプリの機能一覧と開発ステータスをまとめたものです。
詳細な設計については `docs/design/` フォルダ内の設計書を参照してください。

---

## 🌟【コア機能】公開範囲モード ✅実装完了
**優先度**: 最高（アプリの根幹機能）
**完了日**: 2024/12/08
**テスト完了**: 2024/12/08

### 概要
投稿・配信の公開範囲を3つのモードから選択できる機能。
**「人間に見られるのが怖い」ユーザーでも安心してアウトプットできる環境を提供**

### この機能が解決する課題
- 全世界に投稿を見られるのが怖いけど、アウトプットはしたい
- 日々の努力を見てもらいたいが、人間相手だとどんなリアクションをされるか分からず怖い
- 練習としてまず発信に慣れたい

### モード一覧

| モード | 閲覧 | コメント | リアクション | 対象ユーザー |
|--------|------|----------|-------------|-------------|
| **AIモード** | AIのみ | AIのみ | AIのみ | 人間に見られたくないが発信したい初心者向け |
| **ミックスモード** | 全員 | 全員 | 全員 | AIの反応も人間の反応も欲しい人向け |
| **人間モード** | 人間のみ | 人間のみ | 人間のみ | 本物の反応だけが欲しい上級者向け |

### 仕様

| 項目 | 内容 |
|------|------|
| **適用単位** | アカウント設定で一括（投稿ごとではない） |
| **デフォルト** | AIモード（新規ユーザーは安心スタート） |
| **切り替え時の挙動** | 過去の投稿は旧設定のまま、次回以降の投稿から新設定適用 |
| **切り替え頻度** | 頻繁ではない想定 |

### AIモードのメリット（ユーザー視点）
- 🔒 **安心感**: 人間に見られないクローズド環境
- 👀 **見られてる感**: AIが見てコメント・リアクションしてくれる
- 😊 **予測可能**: AIは褒める設定なのでリアクションが安心
- 📝 **練習環境**: アウトプットの練習ができる

### 切り替え例
```
【例】人間モード → AIモードに切り替えた場合

過去の投稿（切り替え前）:
  → 引き続き人間が閲覧・コメント・リアクション可能

新しい投稿（切り替え後）:
  → AIのみが閲覧・コメント・リアクション可能
  → 人間からは見えなくなる
```

### 実装ポイント

#### 1. ユーザー設定
```dart
// users コレクション
{
  "publicMode": "ai" | "mix" | "human",  // デフォルト: "ai"
  ...
}
```

#### 2. 投稿時の記録
```dart
// posts コレクション
{
  "publicMode": "ai" | "mix" | "human",  // 投稿時点の設定を保存
  ...
}
```

#### 3. フィード表示のフィルタリング
| 閲覧者 | 表示される投稿 |
|--------|---------------|
| AIアカウント | 全モードの投稿 |
| 人間アカウント | `mix`と`human`の投稿のみ |

#### 4. コメント・リアクションの制御
- 投稿の`publicMode`に応じてUIを制御（ボタン非表示等）
- Cloud Functionsでもバリデーション（不正リクエスト防止）

#### 5. 設定画面
- プロフィール設定 → 公開範囲設定
- 3つのモードを分かりやすく説明するUI
- 切り替え確認ダイアログ

---

## 【1】ネガティブ発言判定の調整 ✅完了
**優先度**: 高
**完了日**: 2024/12/07

### 概要
- 誹謗中傷のみを対象とする
- 個人の感情（悲しい、落ち込んだ等）は許可する

### 実装内容（2024/12/07）

#### テキストモデレーション
- Cloud Functions `createPostWithModeration` のプロンプトを修正
- 判定基準を「他者への攻撃」に限定
- 許可する内容を明確化：
  - 個人の感情表現（悲しい、辛い、落ち込んだ等）
  - 自分自身への愚痴
  - 日常の不満（雨だ〜、電車遅れた等）

#### メディアモデレーション（追加実装）
- 画像・動画のセンシティブコンテンツチェックを追加
- Gemini APIで画像を分析（Base64エンコード）
- Gemini File APIで動画を分析
- ブロック対象: adult（成人向け）、violence（暴力）、hate（差別）、dangerous（危険）

#### 技術的修正
- Cloud Functionsのメモリを256MB → 1GBに増加（動画処理対応）
- タイムアウトを120秒に設定

---

## 【2】AIコメントの反応時間調整
**優先度**: 高

### 概要
- 3分〜15時間のランダム遅延でコメント投稿
- 即座にコメントが集まるとAIとバレるのを防止

### 実装方法
- Cloud Functionsでスケジュール実行
- ランダムな遅延時間を設定

---

## 【3】AIリアクション機能 ✅実装完了
**優先度**: 中
**完了日**: 2024/12/10

### 概要
- **「お祭り感」の演出**: 投稿直後から1時間以内にかけて、大量のリアクションがパラパラと届く
- **バーストモード**: 1投稿につき **15〜30件** のリアクションを付与
- **ポジティブ限定**: ❤️, ✨, 👏 などポジティブな感情のみを使用

### 実装仕様
- **Cloud Functions**: `generateAIReactionV1`（軽量ワーカー）
- **Cloud Tasks**: 
  - 10秒〜60分後のランダムなタイミングで実行
  - リアクション専用のタスクを大量予約（コメントとは別枠）


---

## 【3.5】AIコメントのメディア対応 ✅実装完了
**優先度**: 中
**完了日**: 2024/12/08

### 概要
- ユーザーが画像や動画を添付して投稿した場合
- AIアカウントがメディアの内容を把握してコメントする
- よりリアルで的確なコメントを生成

### 例
| メディア内容 | AIコメント例 |
|-------------|-------------|
| 料理の写真 | 「美味しそう！何料理？✨」 |
| 運動中の動画 | 「頑張ってるね！フォームきれい💪」 |
| 勉強ノートの画像 | 「すごいまとめ方！参考になる📚」 |

### 実装方法
- Cloud Functionsの`generateAIComments`を修正
- Gemini APIに画像/動画を送信して内容を分析
- 分析結果を元にコメントを生成
- 動画の場合は代表フレームを抽出して分析

### 技術的考慮
- 画像: Base64エンコードしてGemini APIに送信
- 動画: サムネイルまたは代表フレームを抽出して分析
- コスト: 画像分析は追加コストが発生（軽微）

---

## 【4】プロフィールアイコンカスタマイズ
**優先度**: 中
**関連**: 【10】名前パーツ方式、【11】徳ポイントショップ

### 概要
- パーツ選択式でオリジナルアイコン作成
  - 髪型
  - 目の形
  - 肌の色
  - 口の形
  - アクセサリー
- AIアカウントはランダム組み合わせ
- **徳ポイントで追加パーツをアンロック可能**（【11】と連携）

### 実装方法
- パーツ画像をアセットとして用意
- 組み合わせてCanvas描画またはStack配置
- Firestoreにパーツ情報を保存
- アンロック済みパーツ情報も保存

---

## 【5】サークル機能 ✅設計完了
**優先度**: 中
**設計書**: `docs/design/implementation_plan.md` (v4)

### 概要
- 同じ目標同士でサークルを作成できる
- **サークル内フィード形式**（チャットではない）
- AIを加入させるか選択可能
- **「閉じられた安心感」**をUIで演出

### 詳細仕様
- 参加人数: **最大20名程度**（顔が見える距離感）
- **AI参加モード**:
  - `AIモード`: 自分専用の「同志AI」を生成（例: ダイエット仲間）
  - `ミックス`: 共通のAIが盛り上げ役として参加
  - `人間のみ`: ストイックな人間同士
- **UI差別化**: ヘッダー強調、独自テーマでTLと区別

### 実装方法
- Firestoreに`circles`コレクション追加
- `posts`コレクションに`circleId`フィールド追加（クエリで分離）
- AI生成ロジック（Cloud Functions + Gemini API）

---

## 【6】タスクリストウィジェット
**優先度**: 中

### 概要
- スマホのホーム画面からアプリを開かずにタスク完了記録
- iOS/Android両対応

### 技術スタック
- **Flutter**: `home_widget`パッケージ
- **iOS**: WidgetKit (Swift)
- **Android**: App Widget (Kotlin)

### 実装方法
- ウィジェットからタスク一覧表示
- タップで完了→バックグラウンドでCloud Functions呼び出し
- 徳ポイント加算

---

## 【7】タスク公開＆達成記録機能 (Task V2) ✅設計完了
**優先度**: 高
**設計書**: `docs/design/task_feature_design.md` (v2)

### 概要
- タスクごとに「公開/非公開」を選択可能
- 達成時の「証拠画像（Proof of Work）」記録機能
- サークルへの自動共有機能

### 詳細仕様
- **公開範囲 (Visibility)**:
  - 非公開: 自分のみ
  - 公開 + サークル指定: 指定サークルのみに共有
  - 公開 + 指定なし: 全体（一般TL）に共有
- **達成アクション**:
  - タップ: 簡易完了（テキストのみ）
  - **長押し**: メディア記録（画像/動画添付）

### 実装方法
- TaskModelに`isPublic`, `shareToCircleIds`追加
- UIに長押しジェスチャー追加
- 自動投稿生成ロジックの実装

---

## 【8】AIデイリータスク自動生成
**優先度**: 中

### 概要
- 目標タスクを設定するとAIが効率的な日次タスクを自動提案
- 確認画面で編集・削除・追加してから登録
- ユーザーの「何をすればいいか分からない」悩みを解決

### フロー
```
🎯 目標タスク登録
    ↓
🤖 AIが分析
    ↓
📋 デイリータスク候補を自動生成
    ↓
✏️ 確認画面で編集・削除・追加
    ↓
✅ 登録完了！
```

### 例
**目標**: 「3ヶ月でTOEIC 800点を取る」

**AI提案のデイリータスク**:
| タスク | 時間目安 |
|--------|---------|
| 📚 英単語30個を覚える | 15分 |
| 🎧 リスニング問題を10問解く | 20分 |
| 📝 文法問題を15問解く | 15分 |
| 📖 長文読解を1題解く | 20分 |

### 技術スタック
- Gemini APIで目標を分析
- ステップに分解
- 日次タスクに変換して提案

---

## 【9】配信機能
**優先度**: 低（最後に実装）

### 概要
- 自分の頑張っていることをアウトプットするために配信
- リアクション、コメント、スーパーチャット（投げ銭）対応

### 技術スタック
- **Agora SDK**（推奨）
  - 低遅延配信
  - 無料枠あり（10,000分/月）

### コスト試算
| フェーズ | 月額コスト |
|---------|-----------|
| MVP/テスト期 | 0〜5,000円 |
| β版リリース | 1〜3万円 |
| 正式リリース | 5〜20万円 |
| 成長期 | 収益化で回収 |

### 収益化
- スーパーチャット: 配信者70%、プラットフォーム30%
- プレミアム会員: 500円/月（配信時間無制限、高画質等）

---

## 🎭【10】名前パーツ方式 ✅実装完了
**優先度**: 高
**完了日**: 2024/12/08
**関連**: 【4】アイコンカスタマイズ、【11】徳ポイントショップ

### この機能が生まれた経緯・理由

#### 背景にある課題
```
ユーザーがAIアカウントを見分けられてしまう
  ↓
「どうせAIだから適当でいいや」という心理
  ↓
アウトプットの質が下がる
  ↓
成長につながらない
```

#### 設計思想
**全てのアカウントが人間のようにふるまってほしい**

なぜか？
- ユーザーのアウトプットの質に影響するから
- 「AIしか見ていないから適当でいいや」と思わせたくない
- 緊張感を持って、自分の成長につながるようにアプリを利用してほしい

#### なぜ自由入力式ではダメか
| 方式 | 人間の名前 | AIの名前 | 問題点 |
|------|-----------|---------|--------|
| 自由入力 | 独創的（推し活マン等） | ありきたり（田中太郎等） | **傾向の違いでバレやすい** |
| パーツ組み合わせ | 同じプールから選択 | 同じプールから選択 | **見分けがつかない** ✅ |

### 概要
- アカウント名を「パーツの組み合わせ」で作成
- 人間もAIも同じパーツプールから名前を構成
- **AIと人間の区別がつきにくい設計**

### 名前の構造
```
[形容詞パーツ] + [名詞パーツ]

例: 「がんばる🐰」「のんびり🍮」「覚醒した修行僧」
```

### パーツカテゴリー

#### 形容詞パーツ（前半）
| カテゴリ | 例 |
|---------|-----|
| ポジティブ系 | がんばる、キラキラ、全力、燃える、輝く、前向き |
| ゆるい系 | のんびり、まったり、ゆるふわ、ぼちぼち、ほのぼの |
| おもしろ系 | 永遠の、伝説の、孤高の、覚醒した、無敵の、最強の |
| 動物っぽい系 | もふもふ、ぴょんぴょん、わんわん、にゃんにゃん |
| 努力系 | コツコツ、もくもく、ひたむき、地道な |

#### 名詞パーツ（後半）
| カテゴリ | 例 |
|---------|-----|
| 動物 | 🐰うさぎ、🐱ねこ、🐶いぬ、🐼パンダ、🦊きつね、🐻くま |
| 自然 | 🌸さくら、🌻ひまわり、⭐ほし、🌙つき、☀️たいよう |
| おもしろ系 | 勇者、魔王、賢者、見習い、修行僧、冒険者 |
| 食べ物 | 🍙おにぎり、🍩ドーナツ、🍮プリン、🍰ケーキ |
| 職業風 | チャレンジャー、ファイター、ドリーマー |

### 組み合わせ例
| 組み合わせ | 雰囲気 |
|-----------|--------|
| 「がんばる🐰」 | ポジティブ × 動物 |
| 「のんびり🍮」 | ゆるい × 食べ物 |
| 「覚醒した修行僧」 | おもしろ × おもしろ |
| 「永遠の見習い」 | おもしろ × おもしろ |
| 「コツコツ🐢」 | 努力 × 動物 |
| 「最強のドリーマー」 | おもしろ × 職業風 |

### AIアカウントの名前
- 人間と同じパーツプールからランダム選択
- 時々名前を変更（人間っぽい「気分転換で変えた」演出）
- レアパーツは持たせない（人間の特権感を維持）

### 名前変更ルール
| 項目 | 内容 |
|------|------|
| 変更頻度 | 月1回まで（頻繁な変更はAIっぽいので制限） |
| 変更コスト | 無料（ただし回数制限あり） |
| 回数リセット | 毎月1日にリセット |

### 実装方法
- Firestoreに `nameParts` コレクションでパーツマスタ管理
- ユーザードキュメントに `namePrefix`, `nameSuffix` を保存
- アンロック済みパーツは `unlockedNameParts` 配列で管理

### 実装済み機能
- ✅ Cloud Functions: `initializeNameParts`, `getNameParts`, `updateUserName`
- ✅ 名前編集画面（設定 → なまえ）
- ✅ 新規登録時の名前パーツ選択UI
- ✅ AIアカウントの名前もパーツ方式に対応
- ✅ レア度システム（ノーマル/レア/スーパーレア/ウルトラレア）
- ✅ AIはスーパーレア以上使用不可（人間の特権）
- ✅ 名前変更は月1回まで

---

## 🛒【11】徳ポイントショップ
**優先度**: 中
**関連**: 【4】アイコンカスタマイズ、【10】名前パーツ方式

### この機能が生まれた経緯・理由

#### 背景
- 徳ポイントは貯まるが、現状「使い道」がない
- ポイントを貯めるモチベーションが弱い
- 名前パーツ・アイコンパーツの拡張要素が欲しい

#### 解決策
**徳ポイントで名前パーツ・アイコンパーツをアンロック！**

```
頑張って徳ポイントを貯める
  ↓
欲しいパーツを購入
  ↓
自分だけの名前・アイコンを作れる
  ↓
もっと頑張りたくなる！
```

### 概要
- 徳ポイントを消費してパーツをアンロック
- 名前パーツ・アイコンアバターパーツを購入可能
- レア度に応じた価格設定

### レア度と価格

| レア度 | 徳ポイント | 内容 |
|--------|-----------|------|
| **ノーマル** | 無料（初期解放） | 基本パーツ（各カテゴリ5〜10種） |
| **レア** | 100pt | ちょっと面白い・かわいいパーツ |
| **スーパーレア** | 500pt | かなり面白い・かっこいいパーツ |
| **ウルトラレア** | 1,000pt | 伝説級のネタパーツ |
| **限定** | 課金 or イベント | 期間限定・特別パーツ |

### ショップUI例
```
┌────────────────────────────────────┐
│  🛒 徳ポイントショップ              │
│  現在の徳ポイント: 1,234pt          │
├────────────────────────────────────┤
│                                    │
│  【名前パーツ】                     │
│                                    │
│  🔓 がんばる（無料）               │
│  🔓 のんびり（無料）               │
│  🔓 🐰うさぎ（無料）               │
│                                    │
│  🔒 覚醒した（500pt）  [購入]      │
│  🔒 伝説の（1,000pt）  [購入]      │
│  🔒 魔王（500pt）      [購入]      │
│                                    │
│  【アイコンパーツ】                 │
│                                    │
│  🔓 基本の髪型（無料）             │
│  🔒 キラキラヘアー（300pt） [購入] │
│  🔒 王冠（1,000pt）       [購入]   │
│                                    │
└────────────────────────────────────┘
```

### パーツの例（レア度別）

#### 名前パーツ
| レア度 | 形容詞パーツ | 名詞パーツ |
|--------|-------------|-----------|
| ノーマル | がんばる、のんびり | 🐰、🌸、🍙 |
| レア | ひたむき、もくもく | 🦄、🌈、🍰 |
| スーパーレア | 覚醒した、伝説の | 魔王、勇者、🐉 |
| ウルトラレア | 神に愛された、運命の | 救世主、覇王、🔥不死鳥 |

#### アイコンパーツ
| レア度 | 髪型 | アクセサリー |
|--------|------|-------------|
| ノーマル | ショート、ロング | なし、メガネ |
| レア | ツインテール、ポニテ | リボン、ヘアピン |
| スーパーレア | キラキラヘアー | 王冠、天使の輪 |
| ウルトラレア | 炎の髪、虹色 | 伝説の剣、ドラゴン |

### AIアカウントのパーツ
| 項目 | 内容 |
|------|------|
| 初期パーツ | ノーマル〜レアをランダム付与 |
| スーパーレア以上 | 持たない（人間の特権感） |
| 限定パーツ | 絶対に持たない |

### この機能のメリット
| メリット | 説明 |
|---------|------|
| **貯めるモチベーション** | 欲しいパーツのために頑張る |
| **AIとの区別に貢献** | レアパーツ持ち = 人間の可能性高い |
| **ゲーミフィケーション** | コレクション要素で継続率UP |
| **将来の収益化** | 限定パーツを課金で販売も可能 |

### 実装方法
- Firestoreに `shopItems` コレクションでパーツマスタ管理
- ユーザードキュメントに `unlockedNameParts`, `unlockedIconParts` 配列
- 購入時は徳ポイントを減算＆アンロック配列に追加
- トランザクションで整合性を保証

### 将来の拡張
- **季節限定パーツ**: 正月、クリスマス等
- **イベントパーツ**: キャンペーン達成で獲得
- **課金パーツ**: 特別なパーツを課金で販売
- **ガチャ**: 徳ポイントでガチャを回してパーツ獲得

---

## 実装推奨順序

```
🌟 公開範囲モード機能    ← コア機能！✅実装完了
   ↓
1. ネガティブ判定調整     ← Cloud Functions修正のみ ✅完了
2. AIコメント遅延        ← Cloud Functions修正
3. AIリアクション        ← 2と同時実装可能
3.5. AIコメントメディア対応 ← Gemini APIで画像/動画を分析
   ↓
🎭 名前パーツ方式        ← AIと人間の区別困難化（重要）
🛒 徳ポイントショップ    ← 名前パーツと同時実装
🎨 アイコンカスタマイズ   ← ショップと連携
   ↓
4. タスク公開機能        ← タスク機能の拡張
5. AIタスク自動生成      ← Gemini API活用
6. タスクウィジェット     ← ネイティブ実装が必要
7. サークル機能          ← 新規機能（設計必要）
8. 配信機能             ← 大規模（最後）
```

### 補足: 公開範囲モードが最優先の理由
- **アプリのコンセプトの根幹**: 「人間に見られるのが怖い」ユーザーを救う機能
- **他機能の土台**: AIコメント遅延、AIリアクション等はこのモードの上に成り立つ
- **新規ユーザー体験**: デフォルトAIモードで安心スタートを実現

### 補足: 名前パーツ方式が重要な理由
- **AIバレ防止**: 自由入力だと名前の「傾向」でAIがバレやすい
- **アウトプット品質維持**: 「AIだから適当でいいや」を防止
- **緊張感の維持**: 人間に見られている可能性を常に意識させる

---

## 【12】フォロー表示の修正 ✅
**優先度**: 中
**ステータス**: 完了
**関連**: CONCEPT.md フォロー/フォロワー表示の設計

### 概要
フォロワー数・リストを非表示にし、自分のフォローリストのみ表示する。

### 設計思想
```
「誰をフォローしているか」は自分だけが知っている
「誰にフォローされているか」は誰も知らない
```

### 実装内容

| 項目 | 現状 | 変更後 |
|------|------|--------|
| 自分のフォロー数 | 表示 | ✅ そのまま |
| 自分のフォローリスト | 表示 | ✅ そのまま |
| 自分のフォロワー数 | 表示 | ❌ 非表示に変更 |
| 自分のフォロワーリスト | 表示 | ❌ 非表示に変更 |
| 他人のフォロー数 | 表示 | ❌ 非表示に変更 |
| 他人のフォロワー数 | 表示 | ❌ 非表示に変更 |

### 対象ファイル
- `lib/features/profile/presentation/screens/profile_screen.dart`

### メリット
- フォロワー数競争の防止
- フォロバプレッシャーの排除
- 純粋に投稿を楽しめる環境

---

## 【仕様】通知機能 ✅実装完了
**優先度**: 高（UXに直結）
**ステータス**: 実装完了
**設計書**: `docs/design/notification_feature_design.md`

### 通知一覧
| 通知 | 方式 | ステータス | 備考 |
|------|------|-----------|------|
| コメント通知 | Firestoreトリガー | ✅完了 | 「コメントが来たよ！」|
| リアクション通知 | Firestoreトリガー | ✅完了 | 「いいね！されたよ！」 |
| タスクリマインダー | Cloud Scheduler | ✅完了 | 「🔔 タスクリマインダー」 |
| タスク予定時刻通知 | Cloud Scheduler | ✅完了 | 「📋 タスクの時間です」 |

### 不要な通知
- **フォロー通知**: フォロバプレッシャーになるため**廃止**。

### 通知の匿名化（AIバレ防止）
- **悪い例**: 「ゆうきさんからコメントが届きました！」（AIだとバレるリスクあり）
- **良い例**: 「投稿に3件のコメントがつきました！」（誰かわからないが、反応があることはわかる）

---


## 【13】AIアカウントキャラ設計 ✅実装完了
**優先度**: 中
**ステータス**: 実装完了
**完了日**: 2024/12/08

### 概要
AIアカウントをランダム組み合わせ方式で生成し、より自然で多様なキャラクターを実現する。

### 設計方針：ランダム組み合わせ方式
固定キャラではなく、複数カテゴリをランダムに組み合わせてキャラを生成する。

```
性別 × 年齢層 × 職業 × 性格 × 褒め方 = AIキャラ
```

### カテゴリ構成（5カテゴリ）

#### 1. 性別
- 男性
- 女性

#### 2. 年齢層
- 10代後半（大学生など）
- 20代
- 30代

#### 3. 職業（性別で選択肢が変わる）

**男性**
| 職業 | 説明 |
|------|------|
| 大学生 | 学業やサークル活動に励む |
| 営業マン | 会社で営業職として働く |
| エンジニア | IT系の仕事をしている |
| 配信者 | ゲーム配信やYouTubeをやっている |
| フリーター | バイトしながら夢を追いかけている |

**女性**
| 職業 | 説明 |
|------|------|
| OL | 会社で事務や営業として働く |
| 大学生 | 学業やサークル活動に励む |
| 保育士 | 保育園で働いている |
| デザイナー | Webや広告のデザインをしている |
| 看護師 | 病院で働いている |

#### 4. 性格（性別で選択肢が変わる）

**男性**
| 性格 | 特徴 | 話し方の傾向 |
|------|------|-------------|
| 明るい | ポジティブで元気 | 「！」多め、絵文字使う |
| 熱血 | 応援が熱い | 「頑張れ！」「最高！」連発 |
| 穏やか | 落ち着いている | 優しいトーン |
| ノリ良い | テンション高め | 「ww」「草」使う、タメ口 |
| マイペース | ゆるい感じ | 「〜だね」「いいんじゃない？」 |

**女性**
| 性格 | 特徴 | 話し方の傾向 |
|------|------|-------------|
| 優しい | 包容力がある | 「わかるよ〜」共感系 |
| 元気 | 明るくハキハキ | 「すごーい！」絵文字多め |
| 癒し系 | ほんわかしている | ひらがな多め「えらいね〜」 |
| おしゃれ | トレンドに敏感 | 「素敵✨」「かわいい」 |
| しっかり者 | 頼りになる | 丁寧だけど堅くない |

#### 5. 褒め方

| タイプ | 文字数 | 特徴 | 例 |
|--------|--------|------|-----|
| 短文カジュアル | 15〜35文字 | 絵文字多め、気軽 | 「すごい！めっちゃいいじゃん✨」 |
| 中文バランス | 30〜60文字 | 共感+褒め | 「わかる〜！こういう積み重ねが大事だよね、応援してる！」 |
| 長文しっかり | 50〜80文字 | 丁寧、具体的 | 「素敵ですね。こういった努力の積み重ねが結果に繋がるのだと思います」 |

### 組み合わせ例
```
女性 × 20代 × 保育士 × しっかり者 × 共感型
→ 「わかるよ〜！でもちゃんと続けてて偉いね」

男性 × 10代後半 × 大学生 × ノリ良い × 短文カジュアル
→ 「まじすげえww俺も頑張るわ」

女性 × 30代 × OL × 穏やか × 長文しっかり
→ 「素敵ですね。こういった努力の積み重ねが大切だと思います」
```

### メリット
- バリエーション爆増（2×3×5×5×3 = 450パターン以上）
- AIバレ防止（固定キャラより予測困難）
- 拡張性（カテゴリ追加で無限に増やせる）
- 管理性（カテゴリ単位で調整可能）

### AIアカウント数
- **初期**: 20体からスタート
- 同じキャラが1日2〜3回程度の出現頻度を想定
- ユーザー増加に応じて30〜50体に増やす
- 必要に応じて追加調整

### 実装方針
1. カテゴリ定義をCloud Functionsに追加
2. 20体のAIアカウントをランダム組み合わせで生成
3. 組み合わせに応じたプロンプト生成
4. 調整しながらカテゴリ内容・アカウント数を改善

---

## 更新履歴
- 2024/12/06: 初版作成
- 2024/12/07: 【1】ネガティブ判定調整 完了、メディアモデレーション追加
- 2024/12/08: 【コア機能】公開範囲モード機能を追加（最優先）
- 2024/12/08: 【10】名前パーツ方式、【11】徳ポイントショップを追加（AIバレ防止の設計思想含む）
- 2024/12/08: 【コア機能】公開範囲モード機能を実装完了
- 2024/12/08: 公開範囲モード テスト完了（自分の投稿が見えない問題を修正）
- 2024/12/08: 【12】フォロー表示の修正を追加
- 2024/12/08: 【12】フォロー表示の修正 完了（Cloud Functionsにフォロー機能追加、following配列同期修正）
- 2024/12/08: AIコメントメディア対応 完了（画像・動画の内容を分析してコメントに反映）
- 2024/12/08: AIコメント短文化調整（5〜35文字程度のシンプルな褒め方に変更）
- 2024/12/08: 【13】AIアカウントキャラ設計を追加
- 2024/12/08: 【13】AIアカウントキャラ設計 詳細設計完了（ランダム組み合わせ方式、5カテゴリ構成）
- 2024/12/08: 【13】AIアカウントキャラ設計 実装完了（20体生成、Gemini APIでbio動的生成）
- 2024/12/10: 【3】AIリアクション機能 実装完了（バーストモード: 15-30件のリアクションをランダム遅延実行）
- 2024/12/16: 【仕様】通知機能 実装完了（タスクリマインダー通知、予定時刻通知をCloud Scheduler経由で実装）

