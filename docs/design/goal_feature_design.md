# ç›®æ¨™æ©Ÿèƒ½ (Goal Feature) è¨­è¨ˆæ›¸

## 1. æ¦‚è¦
ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒé•·æœŸçš„ãªã€Œç›®æ¨™ã€ã‚’è¨­å®šã—ã€æ—¥ã€…ã®ã€Œã‚¿ã‚¹ã‚¯ã€ã‚’ãã®ç›®æ¨™ã«ç´ä»˜ã‘ã‚‹ã“ã¨ã§ã€é”æˆæ„Ÿã¨ç¶™ç¶šæ€§ã‚’é«˜ã‚ã‚‹æ©Ÿèƒ½ã€‚
ç›®æ¨™ã®é”æˆåº¦åˆã„ã‚„é€²æ—ã‚’å¯è¦–åŒ–ã—ã€ãƒ¢ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ç¶­æŒã‚’æ”¯æ´ã™ã‚‹ã€‚

## 2. ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ« (GoalModel)

| ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰å | å‹ | èª¬æ˜ |
| :--- | :--- | :--- |
| `id` | String | ç›®æ¨™ã®ä¸€æ„ãªID (UUID) |
| `userId` | String | æ‰€æœ‰è€…ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ID |
| `title` | String | ç›®æ¨™ã®ã‚¿ã‚¤ãƒˆãƒ« (å¿…é ˆ) |
| `description` | String | ç›®æ¨™ã®è©³ç´°ãƒ»ãƒ¡ãƒ¢ (ä»»æ„) |
| `deadline` | DateTime? | é”æˆæœŸé™ (ä»»æ„) |
| `colorValue` | int | ãƒ†ãƒ¼ãƒã‚«ãƒ©ãƒ¼ (ARGB int) |
| `status` | String | ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ ('active', 'completed', 'archived') |
| `createdAt` | DateTime | ä½œæˆæ—¥æ™‚ |
| `updatedAt` | DateTime | æ›´æ–°æ—¥æ™‚ |
| `completedAt` | DateTime? | é”æˆæ—¥æ™‚ |
| `isPublic` | bool | å…¬é–‹è¨­å®š (å°†æ¥çš„ãªSNSæ©Ÿèƒ½ç”¨ã€‚ç¾åœ¨ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆfalse) |

### é–¢é€£ãƒ¢ãƒ‡ãƒ«ã¸ã®å½±éŸ¿
*   **TaskModel**: `goalId` ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’è¿½åŠ ã€‚ã‚¿ã‚¹ã‚¯ãŒã©ã®ç›®æ¨™ã«å±ã™ã‚‹ã‹ã‚’ç®¡ç†ã€‚

## 3. æ©Ÿèƒ½ä»•æ§˜

### 3.1 ç›®æ¨™ã®ä½œæˆ (Create)
*   **å ´æ‰€**: ç›®æ¨™ä¸€è¦§ç”»é¢ã®ã€Œï¼‹ã€ãƒœã‚¿ãƒ³ (FAB)ã€‚
*   **å…¥åŠ›é …ç›®**:
    *   ã‚¿ã‚¤ãƒˆãƒ« (å¿…é ˆ)
    *   è©³ç´° (ä»»æ„)
    *   æœŸé™ (ä»»æ„) - ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã§æ—¥ä»˜ã¨æ™‚åˆ»ã‚’é¸æŠã€‚
    *   ã‚«ãƒ©ãƒ¼ (ä»»æ„) - ãƒ—ãƒªã‚»ãƒƒãƒˆã‹ã‚‰é¸æŠã€‚
    *   å…¬é–‹è¨­å®š (ä»»æ„) - ãƒˆã‚°ãƒ«ã‚¹ã‚¤ãƒƒãƒã€‚
*   **æŒ™å‹•**: ä½œæˆã¨åŒæ™‚ã«Firestoreã«ä¿å­˜ã•ã‚Œã€ä¸€è¦§ã«è¿½åŠ ã•ã‚Œã‚‹ã€‚

### 3.2 ç›®æ¨™ã®ä¸€è¦§è¡¨ç¤º (Read)
*   **å ´æ‰€**: ã‚¿ã‚¹ã‚¯ç”»é¢å³ä¸Šã®æ——ã‚¢ã‚¤ã‚³ãƒ³ã‹ã‚‰é·ç§»ã™ã‚‹ã€Œç›®æ¨™ä¸€è¦§ç”»é¢ã€ã€‚
*   **è¡¨ç¤ºå†…å®¹**:
    *   **é€²è¡Œä¸­ã®ç›®æ¨™**: ã‚«ãƒ¼ãƒ‰å½¢å¼ã§è¡¨ç¤ºã€‚è‰²ã¯è¨­å®šã—ãŸãƒ†ãƒ¼ãƒã‚«ãƒ©ãƒ¼ã€‚
    *   **æ®¿å ‚å…¥ã‚Š (Archive)**: é”æˆæ¸ˆã¿ã®ç›®æ¨™ã‚’æ ¼ç´ã™ã‚‹æŠ˜ã‚ŠãŸãŸã¿ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã€‚
*   **è¡¨ç¤ºè¦ç´ **: ã‚¿ã‚¤ãƒˆãƒ«ã€æœŸé™ã¾ã§ã®æ®‹ã‚Šæ™‚é–“ã€é€²æ—çŠ¶æ³ï¼ˆè¦–è¦šçš„è¡¨ç¾ï¼‰ã€‚

### 3.3 ã‚¿ã‚¹ã‚¯ã¨ã®é€£æº (Linking)
*   **ã‚¿ã‚¹ã‚¯ä½œæˆæ™‚**:
    *   ã€Œæ–°ã—ã„ã‚¿ã‚¹ã‚¯ã€è¿½åŠ ã‚·ãƒ¼ãƒˆï¼ˆBottomSheetï¼‰ã«ã€Œç›®æ¨™ã«é–¢é€£ä»˜ã‘ã‚‹?ã€ã‚»ãƒ¬ã‚¯ã‚¿ãƒ¼ã‚’è¡¨ç¤ºã€‚
    *   é€²è¡Œä¸­ã®ç›®æ¨™ã®ã¿é¸æŠå¯èƒ½ã€‚
*   **ä»•æ§˜**:
    *   1ã¤ã®ã‚¿ã‚¹ã‚¯ã¯1ã¤ã®ç›®æ¨™ã«ã®ã¿ç´ä»˜ã (N:1)ã€‚
    *   ç¹°ã‚Šè¿”ã—ã‚¿ã‚¹ã‚¯ã®å ´åˆã€ç”Ÿæˆã•ã‚Œã‚‹å…¨ã¦ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ãŒåŒã˜ `goalId` ã‚’æŒã¤ã€‚

### 3.4 ç›®æ¨™ã®é”æˆ (Completion)
*   **å ´æ‰€**: ç›®æ¨™è©³ç´°ç”»é¢ã®ã€Œç›®æ¨™ã‚’é”æˆã™ã‚‹ï¼ã€ãƒœã‚¿ãƒ³ã€‚
*   **æŒ™å‹•**:
    *   ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’ `completed` ã«å¤‰æ›´ã—ã€`completedAt` ã‚’è¨˜éŒ²ã€‚
    *   **ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—**: ã“ã®ç›®æ¨™ã«ç´ä»˜ã„ã¦ã„ã‚‹**æœªå®Œäº†ã®æœªæ¥ã®ã‚¿ã‚¹ã‚¯**ï¼ˆç¹°ã‚Šè¿”ã—ç”Ÿæˆåˆ†ãªã©ï¼‰ã‚’è‡ªå‹•çš„ã«å‰Šé™¤ã™ã‚‹ã‹ç¢ºèªã—ã€å‰Šé™¤ã™ã‚‹ã€‚
    *   ä¸€è¦§ç”»é¢ã§ã¯ã€Œæ®¿å ‚å…¥ã‚Šã€ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã¸ç§»å‹•ã€‚

### 3.5 ç›®æ¨™ã®å‰Šé™¤ (Delete)
*   **å ´æ‰€**: ç›®æ¨™è©³ç´°ç”»é¢ã®å‰Šé™¤ãƒœã‚¿ãƒ³ã€‚
*   **æŒ™å‹•**:
    *   ç›®æ¨™ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’å‰Šé™¤ã€‚
    *   **ã‚«ã‚¹ã‚±ãƒ¼ãƒ‰å‰Šé™¤**: ã“ã®ç›®æ¨™ã«ç´ä»˜ã„ã¦ã„ã‚‹å…¨ã¦ã®ã‚¿ã‚¹ã‚¯ï¼ˆéå»ãƒ»ç¾åœ¨ãƒ»æœªæ¥ï¼‰ã‚‚åŒæ™‚ã«å‰Šé™¤ã™ã‚‹ï¼ˆç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã‚ã‚Šï¼‰ã€‚

## 4. UI/UX ãƒ‡ã‚¶ã‚¤ãƒ³

### 4.1 ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³
*   ä»¥å‰ã®ãƒœãƒˆãƒ ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³æ¡ˆã‚’å»ƒæ­¢ã€‚
*   **ã‚¿ã‚¹ã‚¯ç”»é¢**ã®å³ä¸Šï¼ˆã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã‚¢ã‚¤ã‚³ãƒ³ã®æ¨ªï¼‰ã«é…ç½®ã—ãŸæ——ã‚¢ã‚¤ã‚³ãƒ³ï¼ˆğŸ³ï¸ï¼‰ã‚’å…¥ã‚Šå£ã¨ã™ã‚‹ã€‚
*   ç›®æ¨™æ©Ÿèƒ½ã¯ã‚¿ã‚¹ã‚¯ç®¡ç†ã®ã€Œä¸Šä½æ¦‚å¿µã€ã¾ãŸã¯ã€Œæ‹¡å¼µæ©Ÿèƒ½ã€ã¨ã„ã†ä½ç½®ä»˜ã‘ã€‚

### 4.2 ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«è¡¨ç¾
*   **å½©åº¦ (Saturation)**: (å°†æ¥å®Ÿè£…äºˆå®š) ç›®æ¨™ã®é”æˆã«è¿‘ã¥ãã«ã¤ã‚Œã¦ã€ã¾ãŸã¯ã‚¿ã‚¹ã‚¯ã‚’æ¶ˆåŒ–ã™ã‚‹ã«ã¤ã‚Œã¦ã€ç›®æ¨™ã‚«ãƒ¼ãƒ‰ã®è‰²ãŒé®®ã‚„ã‹ã«ãªã‚‹ç­‰ã®è¦–è¦šçš„ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’æƒ³å®šï¼ˆç¾åœ¨ã¯åŸºæœ¬ã‚«ãƒ©ãƒ¼è¡¨ç¤ºã®ã¿ï¼‰ã€‚

### 4.3 ç›®æ¨™ã‚«ãƒ¼ãƒ‰å†…ã‚¿ã‚¹ã‚¯è¡¨ç¤º (å®Ÿè£…æ¸ˆã¿)
*   **è¡¨ç¤ºå†…å®¹**: ç›®æ¨™ã«ç´ä»˜ã„ãŸã‚¿ã‚¹ã‚¯ã‚’ç›®æ¨™ã‚«ãƒ¼ãƒ‰å†…ã«ä¸€è¦§è¡¨ç¤ºã€‚
    *   æœªå®Œäº†ã‚¿ã‚¹ã‚¯ãŒä¸Šã€å®Œäº†ã‚¿ã‚¹ã‚¯ãŒä¸‹ï¼ˆã‚½ãƒ¼ãƒˆæ¸ˆã¿ï¼‰ã€‚
    *   å„ã‚¿ã‚¹ã‚¯ã«å®Œäº†çŠ¶æ…‹ã‚’ç¤ºã™ãƒã‚§ãƒƒã‚¯ã‚¢ã‚¤ã‚³ãƒ³ã€‚
    *   ã‚µãƒ–ã‚¿ã‚¹ã‚¯ãŒã‚ã‚‹å ´åˆã¯ã€Œ0/3ã€å½¢å¼ã®ãƒãƒƒã‚¸ã‚’è¡¨ç¤ºã€‚
*   **ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³**:
    *   **ã‚¿ã‚¹ã‚¯è¡Œã‚¿ãƒƒãƒ—**: ã‚¿ã‚¹ã‚¯ç”»é¢ã¸é·ç§»ã—ã€è©²å½“æ—¥ä»˜ã®ã‚¿ã‚¹ã‚¯ã‚’ãƒã‚¤ãƒ©ã‚¤ãƒˆè¡¨ç¤ºï¼ˆãƒ‘ãƒ«ã‚¹ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ä»˜ãï¼‰ã€‚
    *   **ã‚µãƒ–ã‚¿ã‚¹ã‚¯ãƒãƒƒã‚¸ã‚¿ãƒƒãƒ—**: ã‚µãƒ–ã‚¿ã‚¹ã‚¯ä¸€è¦§ã‚’å±•é–‹/æŠ˜ã‚ŠãŸãŸã¿ã€‚
    *   **ãƒã‚§ãƒƒã‚¯ã‚¢ã‚¤ã‚³ãƒ³ã‚¿ãƒƒãƒ—**: ã‚¿ã‚¹ã‚¯ã®å®Œäº†/æœªå®Œäº†ã‚’åˆ‡ã‚Šæ›¿ãˆã€‚
    *   **ã‚µãƒ–ã‚¿ã‚¹ã‚¯è¡Œã‚¿ãƒƒãƒ—**: å€‹åˆ¥ã‚µãƒ–ã‚¿ã‚¹ã‚¯ã®å®Œäº†/æœªå®Œäº†ã‚’åˆ‡ã‚Šæ›¿ãˆã€‚
*   **ãƒã‚¤ãƒ©ã‚¤ãƒˆè¡¨ç¤º**: é·ç§»å…ˆã®ã‚¿ã‚¹ã‚¯ã¯å‹•çš„ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆãƒ‘ãƒ«ã‚¹ï¼‹ã‚°ãƒ­ãƒ¼ï¼‰ã§å¼·èª¿è¡¨ç¤ºã•ã‚Œã€ã‚¿ãƒƒãƒ—ã¾ãŸã¯3ç§’å¾Œã«è§£é™¤ã€‚

## 5. ä»Šå¾Œã®æ‹¡å¼µäºˆå®š (TODO)
*   **ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼é€£æº**: ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ä¸Šã®è©²å½“æ—¥ã«ãƒ•ãƒ©ã‚°ã‚’è¡¨ç¤ºã€‚
*   **ç·¨é›†æ©Ÿèƒ½**: ã‚¿ã‚¤ãƒˆãƒ«ã‚„æœŸé™ã®ä¿®æ­£ã€‚
*   **çµ±è¨ˆ**: é”æˆç‡ã®ã‚°ãƒ©ãƒ•åŒ–ã€‚

## 6. ç›®æ¨™é”æˆæ™‚ã®è‡ªå‹•æŠ•ç¨¿ âœ… (2025-12-28)

### 6.1 æ¦‚è¦
ç›®æ¨™ã«ç´ä»˜ã„ãŸã‚¿ã‚¹ã‚¯ã‚’ã™ã¹ã¦å®Œäº†ã—ã€ç›®æ¨™é€²æ—ãŒ100%ã«ãªã£ãŸéš›ã«ã€è‡ªå‹•ã§ãŠç¥ã„æŠ•ç¨¿ã‚’ä½œæˆã™ã‚‹æ©Ÿèƒ½ã€‚

### 6.2 ãƒˆãƒªã‚¬ãƒ¼æ¡ä»¶
*   ã‚¿ã‚¹ã‚¯å®Œäº†æ™‚ã« `goalId` ãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹
*   `GoalService.getGoalProgress` ã§å®Œäº†ã‚¿ã‚¹ã‚¯æ•° + 1ï¼ˆä»Šå›å®Œäº†åˆ†ï¼‰>= å…¨ã‚¿ã‚¹ã‚¯æ•°

### 6.3 æŠ•ç¨¿å†…å®¹
```
ğŸ‰ ç›®æ¨™ã€Œ{ç›®æ¨™å}ã€ã‚’é”æˆã—ã¾ã—ãŸï¼ãŠã‚ã§ã¨ã†ã”ã–ã„ã¾ã™ï¼
```

### 6.4 UIæ¼”å‡º
*   ç´™å¹é›ªã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆConfettiWidgetï¼‰
*   ç§°è³›Snackbarè¡¨ç¤º

### 6.5 æŠ€è¡“è©³ç´°
*   æŠ•ç¨¿ä½œæˆ: `PostService.createTaskCompletionPost` â†’ `AIService.createPostWithRateLimit`ï¼ˆCloud FunctionsçµŒç”±ï¼‰
*   æŠ•ç¨¿å‰Šé™¤: ã‚¿ã‚¹ã‚¯å®Œäº†å–ã‚Šæ¶ˆã—æ™‚ã€è‡ªå‹•æŠ•ç¨¿ã‚‚å‰Šé™¤
*   å‚ç…§: `task_feature_design.md` ã‚»ã‚¯ã‚·ãƒ§ãƒ³13

